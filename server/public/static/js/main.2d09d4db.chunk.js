(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{63:function(e,t,a){e.exports=a(96)},68:function(e,t,a){},70:function(e,t,a){},88:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),s=a.n(l),c=(a(68),a(7)),i=a(13),o=a(16),u=a(14),m=a(17),h=(a(69),a(70),a(26)),d=a(19),g=a(29),p=a(5),E=a(15),f=a(32),b=a.n(f),v=function e(){var t=this;Object(c.a)(this,e),this.getIngredients=function(e){return t.service.get("search?app_id=".concat("dda53898","&app_key=").concat("63b991cffe5972edb352af4edd5a521c","&q=").concat(e)).then((function(e){return e.data}))},this.service=b.a.create({baseURL:"https://api.edamam.com/"}),this.api_id="dda53898",this.api_key="63b991cffe5972edb352af4edd5a521c"},C=a(6),U=a(58),j=(a(88),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{className:"card"},r.a.createElement(C.a,{style:{width:"28rem"}},r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Title,null,e.recipe.label),r.a.createElement(C.a.Img,{variant:"top",src:e.recipe.image}),r.a.createElement(C.a.Text,null,r.a.createElement("ul",null,e.recipe.ingredientLines.map((function(e){return r.a.createElement("li",null,e)})))),r.a.createElement(E.a,{as:"div",variant:"dark"},r.a.createElement("a",{target:"_blank",href:e.recipe.url},"M\xe1s detalles"))),r.a.createElement(C.a.Footer,null,r.a.createElement("small",{className:"text-muted"},e.recipe.dietLabels)))))}),O=a(39),I=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).getIngredients=function(t){e.services.getIngredients(t).then((function(t){console.log(t),e.setState({recipes:t.hits})})).catch((function(e){return console.log(e)}))},e.componentDidUpdate=function(t){e.state},e.handleChange=function(t){var a=t.target.value;e.setState({ingredients:a})},e.handleSubmit=function(t){t.preventDefault(),e.getIngredients(e.state.ingredients)},e.sendInfo=function(){return e.setState({showIng:!0})},e.state={ingredients:"",recipes:[],showIng:!1},e.services=new v,e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.state.recipes),r.a.createElement(d.a,null,r.a.createElement("h1",null,"NutriHealth"),r.a.createElement(p.a,{onSubmit:this.handleSubmit},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Write your ingredients and look it for a recipe"),r.a.createElement(p.a.Control,{type:"text",name:"ingredients",placeholder:"Write some ingredients separated with comas",value:this.state.ingredients,onChange:this.handleChange})),r.a.createElement(E.a,{variant:"dark",type:"submit",onClick:this.sendInfo},"A cocinar!"),r.a.createElement("br",null)),r.a.createElement("div",null,this.state.showIng?this.state.recipes.length?r.a.createElement(g.a,null,this.state.recipes.map((function(e){return r.a.createElement(j,Object.assign({key:e.recipe.label},e))}))):r.a.createElement(O.a,{animation:"border"}):null))}}]),t}(n.Component),k=function(e){return r.a.createElement(d.a,null,r.a.createElement("h1",null,"Bienvenidos"))},y=a(24),w=a(28),S=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e){var a=e.user,n=e.role;return t.service.post("/signup",{user:a,role:n}).then((function(e){return e.data}))},this.login=function(e){var a=e.username,n=e.password;return t.service.post("/login",{username:a,password:n}).then((function(e){return e.data}))},this.logout=function(){return t.service.post("/logout").then((function(e){return e.data}))},this.loggedin=function(){return t.service.get("/loggedin").then((function(e){return e.data}))},this.service=b.a.create({baseURL:"http://localhost:5000/api/auth",withCredentials:!0})},L=a(20),T=(n.Component,a(43)),x=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(T.a)({},e.state,{user:Object(T.a)({},e.state.user,Object(y.a)({},n,r)),role:t.target.checked}))},e.postUser=function(){e.services.signup(e.state).then((function(t){e.setState({user:{username:"",password:"",email:""},role:!1},e.props.setTheUser(t)),console.log("USUARIO CREADO",t)})).then(alert("Usuario creado")).catch((function(e){return console.log({err:e})}))},e.handleSubmit=function(t){t.preventDefault(),e.postUser()},e.state={user:{username:"",password:"",email:""},role:!1},e.services=new S,e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("h1",null,"Registro de usuarios"),r.a.createElement(p.a,{onSubmit:this.handleSubmit},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Usuario"),r.a.createElement(p.a.Control,{type:"text",name:"username",value:this.state.user.username,onChange:this.handleChange})),r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Contrase\xf1a"),r.a.createElement(p.a.Control,{type:"password",name:"password",value:this.state.user.password,onChange:this.handleChange})),r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Correo Electr\xf3nico"),r.a.createElement(p.a.Control,{type:"email",name:"email",value:this.state.user.email,onChange:this.handleChange})),r.a.createElement(p.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(p.a.Check,{type:"checkbox",label:"Soy nutricionista",onChange:this.handleChange})),r.a.createElement(E.a,{variant:"dark",type:"submit"},"Registrarse")))}}]),t}(n.Component),N=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(y.a)({},n,r))},e.postUser=function(){e.services.login(e.state).then((function(t){e.setState({username:"",password:""}),e.props.setTheUser(t),e.props.history.push("/")})).catch((function(e){return console.log({err:e})}))},e.handleSubmit=function(t){t.preventDefault(),e.postUser()},e.state={username:"",password:""},e.services=new S,e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("h1",null,"Inicio de sesi\xf3n"),r.a.createElement(p.a,{onSubmit:this.handleSubmit},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Usuario"),r.a.createElement(p.a.Control,{type:"text",name:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Contrase\xf1a"),r.a.createElement(p.a.Control,{type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(E.a,{variant:"dark",type:"submit"},"Iniciar sesi\xf3n")))}}]),t}(n.Component),B=a(23),D=a(10),G=(a(95),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).logout=function(){a.services.logout().then((function(e){a.props.setTheUser(!1)})).catch((function(e){return console.log(e)}))},a.state={showmodal:!1},a.services=new S,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.loggedInUser?r.a.createElement(r.a.Fragment,null,"Hola, ",this.props.loggedInUser.username):r.a.createElement(r.a.Fragment,null,"Hola, invitad@");return r.a.createElement("div",null,this.props.loggedInUser?r.a.createElement(B.a,{className:"navigation",bg:"light",expand:"lg",variant:"light"},r.a.createElement(B.a.Brand,{href:"/"},"NutriHealth"),r.a.createElement(B.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(D.a,{className:"justify-content-center",activeKey:"/recipes"},r.a.createElement(D.a.Item,null,r.a.createElement(D.a.Link,{href:"/recipes"},"Buscador de recetas"))),r.a.createElement(B.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(D.a,{className:"ml-auto"},r.a.createElement(D.a.Link,{as:"div"}," ",r.a.createElement(L.b,{to:"/profile"},"Perfil")),r.a.createElement(D.a.Link,{onClick:this.logout},"Cerrar sesi\xf3n"),r.a.createElement(D.a.Link,{as:"small"},e)))):r.a.createElement(B.a,{className:"navigation",bg:"light",expand:"lg",variant:"light"},r.a.createElement(B.a.Brand,{href:"/"},"NutriHealth"),r.a.createElement(B.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(D.a,{className:"justify-content-center",activeKey:"/recipes"},r.a.createElement(D.a.Item,null,r.a.createElement(D.a.Link,{href:"/recipes"},"Buscador de recetas"))),r.a.createElement(B.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(D.a,{className:"ml-auto"},r.a.createElement(D.a.Link,{as:"div"}," ",r.a.createElement(L.b,{to:"/login"},"Inicio sesi\xf3n")),r.a.createElement(D.a.Link,{as:"div"}," ",r.a.createElement(L.b,{to:"/signup"},"Registro")),r.a.createElement(D.a.Link,{as:"small"},e)))))}}]),t}(n.Component)),R=function(e){return console.log(e),r.a.createElement("h1",null,"Soy el perfil de: ",e.loggedInUser.username)},F=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).componentDidUpdate=function(t,a){return console.log("El estado de App se ha actualizado:",e.state)},e.componentDidMount=function(){e.fetchUser()},e.setTheUser=function(t){return e.setState({loggedInUser:t})},e.fetchUser=function(){e.services.loggedin().then((function(t){e.setState({loggedInUser:t})})).catch((function(){return e.setState({loggedInUser:!1})}))},e.state={loggedInUser:null},e.services=new S,e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{setTheUser:this.setTheUser,loggedInUser:this.state.loggedInUser}),r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/recipes",render:function(){return r.a.createElement(I,null)}}),r.a.createElement(h.b,{exact:!0,path:"/",render:function(){return r.a.createElement(k,null)}}),r.a.createElement(h.b,{path:"/signup",render:function(){return r.a.createElement(x,{setTheUser:e.setTheUser})}}),r.a.createElement(h.b,{path:"/login",render:function(t){return r.a.createElement(N,Object.assign({setTheUser:e.setTheUser},t))}}),r.a.createElement(h.b,{path:"/profile",render:function(){return e.state.loggedInUser?r.a.createElement(R,{loggedInUser:e.state.loggedInUser}):r.a.createElement(h.a,{to:"/"})}})))}}]),t}(n.Component);s.a.render(r.a.createElement(L.a,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.2d09d4db.chunk.js.map